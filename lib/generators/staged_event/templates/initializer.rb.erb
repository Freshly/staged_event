# frozen_string_literal: true

StagedEvent::Configuration.configure do |config|
  config.google_pubsub do |google_pubsub|
    # Identifier for a Pub/Sub project
    google_pubsub.project_id = "your-project"
    # The contents of the Pub/Sub keyfile as a Hash
    google_pubsub.credentials = {}

    # This specifies the mapping between the "topic" values stored on events in
    # the database, and the associated Pub/Sub topic id. This level of indirection
    # lets you use arbitrary topic names in your application code instead of being
    # tied to names stored in a third-party infrastructure.
    # The first entry in the map is used as the default for when the event does
    # not specify a topic.
    google_pubsub.topic_map = {
      default: "breaking-news",
    }
  end

  config.publisher do |publisher|
    # The number of events that a publisher will transactionally publish and remove
    # from the database in each iteration.
    publisher.batch_size = 5
  end
end
